<div class="notes-page">
  <h2>Notes</h2>
  <ng-container *ngIf="loading(); else showNotes">
    <p>Loading...</p>
  </ng-container>
  <ng-template #showNotes>
    <app-item-list
      [items]="notes()"
      [loading]="loading()"
      [error]="error()"
      emptyMessage="No notes found."
    >
      <app-item-card
        *ngFor="let note of notes()"
        [item]="note"
        (delete)="deleteNote(note)"
      >
        <span>{{ note.content }}</span>
      </app-item-card>
    </app-item-list>

    <app-fab-button
      icon="add"
      ariaLabel="Add Note"
      (click)="openAddDialog()"
    ></app-fab-button>

    <ng-container *ngIf="showDialog()">
      <app-item-dialog
        title="Add Note"
        submitLabel="Add"
        (submit)="addNote()"
        (cancel)="closeDialog()"
      >
        <app-item-form [submitLabel]="'Add'" (submit)="addNote()">
          <input type="text" placeholder="Title" [(ngModel)]="newNote().title" name="title" required />
          <div *ngIf="!newNote().title && adding()" class="error">Title is required.</div>
          <input type="text" placeholder="Content" [(ngModel)]="newNote().content" name="content" />
        </app-item-form>
      </app-item-dialog>
    </ng-container>
  </ng-template>
</div>
