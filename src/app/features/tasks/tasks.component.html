<div class="tasks-page">
  <div class="tasks-header">
    <h1>Tasks</h1>
    <p class="tasks-subtitle">Manage your tasks and stay organized</p>
  </div>

  <app-fab-button
    *ngIf="selectedTab() === 'tasks'"
    icon="add"
    color="primary"
    ariaLabel="Add Task"
    (fabClick)="openAddTaskDialog()"
  ></app-fab-button>
  <app-fab-button
    *ngIf="selectedTab() === 'categories'"
    icon="add"
    color="accent"
    ariaLabel="Add Category"
    (fabClick)="openAddCategoryDialog()"
  ></app-fab-button>

  <app-tab-switcher
    [tabs]="tabOptions"
    [selectedTab]="selectedTab()"
    (tabChange)="setTab($event)"
  ></app-tab-switcher>

  <app-tasks-tab
    *ngIf="selectedTab() === 'tasks'"
    [tasks]="tasks()"
    [filteredTasks]="filteredTasks"
    [categories]="categories()"
    [selectedCategory]="selectedCategory()"
    [dashboardCards]="dashboardCards"
    [dashboardFilter]="dashboardFilter()"
    [loading]="loading()"
    [error]="error()"
    (setCategory)="setCategory($event)"
    (setDashboardFilter)="setDashboardFilter($event)"
    (toggleComplete)="onToggleComplete($event.task, $event.completed)"
    (startEdit)="openEditTaskDialog($event)"
    (deleteTask)="deleteTask($event)"
  ></app-tasks-tab>

  <app-categories-tab
    *ngIf="selectedTab() === 'categories'"
    [categories]="categories()"
    [categoryLoading]="categoryLoading()"
    [categoryError]="categoryError()"
    (openEditCategoryDialog)="openEditCategoryDialog($event)"
    (deleteCategory)="onDeleteCategory($event)"
  ></app-categories-tab>
</div>
